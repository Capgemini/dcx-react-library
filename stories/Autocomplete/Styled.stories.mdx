import { Meta, Story, Canvas, Props } from '@storybook/addon-docs/blocks';
import { Autocomplete } from '../../src/autocomplete/Autocomplete';
import './style.css';

<Meta title="DCXLibrary/Form/Autocomplete/Styled" component={Autocomplete} />

# GOVUK Style

In this section we're using the Autocomplete component providing the GovUk style passing the relative `className`. Feel free to use your own css and style the formInput as you prefer
The list of available options are:

```json
['Papaya','Persimmon','Paw Paw','Prickly Pear','Peach',Pomegranate',Pineapple']
```

<Canvas>
  <Story name="hint-label">
    {() => {
      const handleSelected = (value) => {
        console.log(value);
      };
      return (
        <Autocomplete
          options={[
            'Papaya',
            'Persimmon',
            'Paw Paw',
            'Prickly Pear',
            'Peach',
            'Pomegranate',
            'Pineapple',
          ]}
          minCharsBeforeSearch={1}
          debounceMs={100}
          hintText="Select your fruit"
          hintClass="autocomplete__label"
          inputProps={{ className: 'govuk-input' }}
          resultUlClass="autocomplete__menu"
          resultlLiClass="autocomplete__option"
          resultNoOptionClass="resultNoOptionClass"
          resultActiveClass="autocomplete__option"
          notFoundText="No fruit found"
          onSelected={handleSelected}
        />
      );
    }}
  </Story>
</Canvas>

\*Before the autocomplete appear you need to type at least 2 character

<Canvas>
  <Story name="min-chars">
    {() => {
      const handleSelected = (value) => {
        console.log(value);
      };
      return (
        <Autocomplete
          options={[
            'Papaya',
            'Persimmon',
            'Paw Paw',
            'Prickly Pear',
            'Peach',
            'Pomegranate',
            'Pineapple',
          ]}
          minCharsBeforeSearch={2}
          debounceMs={100}
          hintText="Select your fruit"
          hintClass="autocomplete__label"
          inputProps={{ className: 'govuk-input' }}
          resultUlClass="autocomplete__menu"
          resultlLiClass="autocomplete__option"
          resultNoOptionClass="resultNoOptionClass"
          resultActiveClass="autocomplete__option"
          notFoundText="No fruit found"
          onSelected={handleSelected}
        />
      );
    }}
  </Story>
</Canvas>

# Default value

<Canvas>
  <Story name="default-value">
    {() => {
      const handleSelected = (value) => {
        console.log(value);
      };
      return (
        <Autocomplete
          options={[
            'Papaya',
            'Persimmon',
            'Paw Paw',
            'Prickly Pear',
            'Peach',
            'Pomegranate',
            'Pineapple',
          ]}
          minCharsBeforeSearch={1}
          debounceMs={100}
          hintText="Select your fruit"
          hintClass="autocomplete__label"
          defaultValue="Papaya"
          inputProps={{ className: 'govuk-input' }}
          resultUlClass="autocomplete__menu"
          resultlLiClass="autocomplete__option"
          resultNoOptionClass="resultNoOptionClass"
          resultActiveClass="autocomplete__option--active"
          notFoundText="No fruit found"
          onSelected={handleSelected}
        />
      );
    }}
  </Story>
</Canvas>

# no result found

<Canvas>
  <Story name="no-result">
    {() => {
      const handleSelected = (value) => {
        console.log(value);
      };
      return (
        <Autocomplete
          options={[
            'Papaya',
            'Persimmon',
            'Paw Paw',
            'Prickly Pear',
            'Peach',
            'Pomegranate',
            'Pineapple',
          ]}
          minCharsBeforeSearch={1}
          debounceMs={100}
          hintText="Select your fruit"
          hintClass="autocomplete__label"
          defaultValue="Papaya"
          inputProps={{ className: 'govuk-input' }}
          resultUlClass="autocomplete__menu"
          resultlLiClass="autocomplete__option"
          resultNoOptionClass="resultNoOptionClass"
          resultActiveClass="autocomplete__option"
          notFoundText="No fruit found"
          onSelected={handleSelected}
          notFoundText="No fruit found"
        />
      );
    }}
  </Story>
</Canvas>

# Placeholder

<Canvas>
  <Story name="placeholder">
    {() => {
      const handleSelected = (value) => {
        console.log(value);
      };
      return (
        <Autocomplete
          options={[
            'Papaya',
            'Persimmon',
            'Paw Paw',
            'Prickly Pear',
            'Peach',
            'Pomegranate',
            'Pineapple',
          ]}
          minCharsBeforeSearch={1}
          debounceMs={100}
          hintText="Select your fruit"
          hintClass="autocomplete__label"
          inputProps={{
            className: 'govuk-input',
            placeholder: 'Search for a fruit',
          }}
          resultUlClass="autocomplete__menu"
          resultlLiClass="autocomplete__option"
          resultNoOptionClass="resultNoOptionClass"
          resultActiveClass="autocomplete__option"
          notFoundText="No fruit found"
          onSelected={handleSelected}
        />
      );
    }}
  </Story>
</Canvas>

# Required

<Canvas>
  <Story name="required">
    {() => {
      const handleSelected = (value) => {
        console.log(value);
      };
      return (
        <form>
          <Autocomplete
            options={[
              'Papaya',
              'Persimmon',
              'Paw Paw',
              'Prickly Pear',
              'Peach',
              'Pomegranate',
              'Pineapple',
            ]}
            minCharsBeforeSearch={1}
            debounceMs={100}
            hintText="Select your fruit"
            hintClass="autocomplete__label"
            inputProps={{ className: 'govuk-input' }}
            resultUlClass="autocomplete__menu"
            resultlLiClass="autocomplete__option"
            resultNoOptionClass="resultNoOptionClass"
            resultActiveClass="autocomplete__option"
            notFoundText="No fruit found"
            onSelected={handleSelected}
            required
          />
          <button type="submit">Search</button>
        </form>
      );
    }}
  </Story>
</Canvas>

# with label

<Canvas>
  <Story name="label">
    {() => {
      const handleSelected = (value) => {
        console.log(value);
      };
      return (
        <form>
          <Autocomplete
            options={[
              'Papaya',
              'Persimmon',
              'Paw Paw',
              'Prickly Pear',
              'Peach',
              'Pomegranate',
              'Pineapple',
            ]}
            minCharsBeforeSearch={1}
            debounceMs={100}
            hintText="Select your fruit"
            hintClass="autocomplete__label"
            inputProps={{ className: 'govuk-input' }}
            resultUlClass="autocomplete__menu"
            resultlLiClass="autocomplete__option"
            resultNoOptionClass="resultNoOptionClass"
            resultActiveClass="autocomplete__option"
            notFoundText="No fruit found"
            onSelected={handleSelected}
            labelText="Search for a fruit"
          />
          <button type="submit">Search</button>
        </form>
      );
    }}
  </Story>
</Canvas>

# with error

<Canvas>
  <Story name="error">
    {() => {
      const handleSelected = (value) => {
        console.log(value);
      };
      return (
        <form>
          <Autocomplete
            options={[
              'Papaya',
              'Persimmon',
              'Paw Paw',
              'Prickly Pear',
              'Peach',
              'Pomegranate',
              'Pineapple',
            ]}
            minCharsBeforeSearch={1}
            hintText="Select your fruit"
            hintClass="autocomplete__label"
            inputProps={{ className: 'govuk-input' }}
            resultUlClass="autocomplete__menu"
            resultlLiClass="autocomplete__option"
            resultNoOptionClass="resultNoOptionClass"
            resultActiveClass="autocomplete__option"
            notFoundText="No fruit found"
            onSelected={handleSelected}
            errorPostion="after-hint"
            errorMessageText="an error occured"
            errorMessageClassName="govuk-error-message"
            labelText="Search for a fruit"
            errorVisuallyHidden={{
              text: 'Error:',
              className: 'govuk-visually-hidden',
            }}
            id="fruit-search"
          />
          <button type="submit">Search</button>
        </form>
      );
    }}
  </Story>
</Canvas>

# With min chars prompt

<Canvas>
  <Story name="with-min-chars-prompt">
    {() => (
      <Autocomplete
        options={[
          'Papaya',
          'Persimmon',
          'Paw Paw',
          'Prickly Pear',
          'Peach',
          'Pomegranate',
          'Pineapple',
        ]}
        defaultValue="Papaya"
        minCharsBeforeSearch={1}
        minCharsMessage="Type at least 1 character to see the available options"
        promptClassName="prompt"
        debounceMs={100}
        hintText="search the list of fruits"
        hintClass="hintClass"
        resultUlClass="resultUlClass"
        resultlLiClass="resultlLiClass"
        resultNoOptionClass="resultNoOptionClass"
        resultActiveClass="resultActiveClass"
        notFoundText="No fruit found"
      />
    )}
  </Story>
</Canvas>

# With conditional prompt

<Canvas>
  <Story name="with-conditional-prompt">
    {() => (
      <Autocomplete
        options={[
          'Papaya',
          'Persimmon',
          'Paw Paw',
          'Prickly Pear',
          'Peach',
          'Pomegranate',
          'Pineapple',
        ]}
        defaultValue=""
        minCharsBeforeSearch={1}
        promptCondition={() => true}
        promptMessage="Enter a valid date before typing here"
        promptClassName="prompt"
        debounceMs={100}
        hintText="search the list of fruits"
        hintClass="hintClass"
        resultUlClass="resultUlClass"
        resultlLiClass="resultlLiClass"
        resultNoOptionClass="resultNoOptionClass"
        resultActiveClass="resultActiveClass"
        notFoundText="No fruit found"
      />
    )}
  </Story>
</Canvas>

# With search function

<Canvas>
  <Story name="with-search-function">
    {() => {
      const handleSearch = (value, options) => {
        return options
          .filter((optionsName) =>
            optionsName.toLowerCase().includes(value.toLowerCase())
          )
          .sort((a, b) => {
            if (a < b) {
              return -1;
            }
            if (a > b) {
              return 1;
            }
            return 0;
          });
      };
      return (
        <Autocomplete
          options={[
            'Zucchini',
            'Tangelo',
            'Kumquat',
            'Jambul',
            'Peach',
            'Pomegranate',
            'Pineapple',
            'Coconut',
            'Mulberry',
            'Banana',
            'Mango',
            'Acerola',
            'Lychee',
          ]}
          minCharsBeforeSearch={1}
          minCharsMessage="Type at least 1 character to see the available options"
          promptClassName="prompt"
          debounceMs={100}
          hintText="search the list of fruits"
          hintClass="hintClass"
          resultUlClass="resultUlClass"
          resultlLiClass="resultlLiClass"
          resultNoOptionClass="resultNoOptionClass"
          resultActiveClass="resultActiveClass"
          notFoundText="No fruit found"
          search={handleSearch}
        />
      );
    }}
  </Story>
</Canvas>

# Properties

<Props of={Autocomplete} />
