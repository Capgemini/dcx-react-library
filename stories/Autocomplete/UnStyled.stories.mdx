import { Meta, Story, Canvas, Props } from '@storybook/addon-docs';
import { Autocomplete } from '../../src/autocomplete/Autocomplete';

<Meta title="DCXLibrary/Form/Autocomplete/Unstyled" component={Autocomplete} />

### An example of 'unstyled' Autocomplete

The list of available options are:

```json
['Papaya','Persimmon','Paw Paw','Prickly Pear','Peach',Pomegranate',Pineapple']
```

<Canvas>
  <Story name="basic">
    {() => {
      const handleSelected = (value) => {
        console.log(value);
      };
      return (
        <Autocomplete
          options={[
            'Papaya',
            'Persimmon',
            'Paw Paw',
            'Prickly Pear',
            'Peach',
            'Pomegranate',
            'Pineapple',
          ]}
          defaultValue="Papaya"
          minCharsBeforeSearch={1}
          debounceMs={100}
          hintText="search the list of fruits"
          hintClass="hintClass"
          resultUlClass="resultUlClass"
          resultlLiClass="resultlLiClass"
          resultNoOptionClass="resultNoOptionClass"
          resultActiveClass="resultActiveClass"
          notFoundText="No fruit found"
          onSelected={handleSelected}
        />
      );
    }}
  </Story>
</Canvas>

# With min chars prompt

<Canvas>
  <Story name="with-min-chars-prompt">
    {() => (
      <Autocomplete
        options={[
          'Papaya',
          'Persimmon',
          'Paw Paw',
          'Prickly Pear',
          'Peach',
          'Pomegranate',
          'Pineapple',
        ]}
        defaultValue="Papaya"
        minCharsBeforeSearch={1}
        minCharsMessage="Type at least 1 character to see the available options"
        debounceMs={100}
        hintText="search the list of fruits"
        hintClass="hintClass"
        resultUlClass="resultUlClass"
        resultlLiClass="resultlLiClass"
        resultNoOptionClass="resultNoOptionClass"
        resultActiveClass="resultActiveClass"
        notFoundText="No fruit found"
      />
    )}
  </Story>
</Canvas>

# With conditional prompt

<Canvas>
  <Story name="with-conditional-prompt">
    {() => (
      <Autocomplete
        options={[
          'Papaya',
          'Persimmon',
          'Paw Paw',
          'Prickly Pear',
          'Peach',
          'Pomegranate',
          'Pineapple',
        ]}
        defaultValue=""
        minCharsBeforeSearch={1}
        promptCondition={() => true}
        promptMessage="Enter a valid date before typing here"
        debounceMs={100}
        hintText="search the list of fruits"
        hintClass="hintClass"
        resultUlClass="resultUlClass"
        resultlLiClass="resultlLiClass"
        resultNoOptionClass="resultNoOptionClass"
        resultActiveClass="resultActiveClass"
        notFoundText="No fruit found"
      />
    )}
  </Story>
</Canvas>

# With search function

<Canvas>
  <Story name="with-search-function">
    {() => {
      const handleSearch = (value, options) => {
        return options
          .filter((optionsName) =>
            optionsName.toLowerCase().includes(value.toLowerCase())
          )
          .sort((a, b) => {
            if (a < b) {
              return -1;
            }
            if (a > b) {
              return 1;
            }
            return 0;
          });
      };
      return (
        <Autocomplete
          options={[
            'Papaya',
            'Persimmon',
            'Paw Paw',
            'Prickly Pear',
            'Peach',
            'Pomegranate',
            'Pineapple',
          ]}
          defaultValue="Papaya"
          minCharsBeforeSearch={1}
          minCharsMessage="Type at least 1 character to see the available options"
          promptClassName="prompt"
          debounceMs={100}
          hintText="search the list of fruits"
          hintClass="hintClass"
          resultUlClass="resultUlClass"
          resultlLiClass="resultlLiClass"
          resultNoOptionClass="resultNoOptionClass"
          resultActiveClass="resultActiveClass"
          notFoundText="No fruit found"
          search={handleSearch}
        />
      );
    }}
  </Story>
</Canvas>


<Props of={Autocomplete} />
