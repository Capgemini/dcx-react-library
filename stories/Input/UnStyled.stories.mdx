import { Meta, Story, Canvas, Props } from '@storybook/addon-docs';
import { FormInput } from '../../src/formInput/FormInput';

<Meta title="DCXLibrary/Form/Input" component={FormInput} />

### An example of 'un-styled' Input

<Canvas>
  <Story name="un-styled">
    {() => {
      const [value, setValue] = React.useState('');
      const handleChange = (event) => {
        setValue(event.currentTarget.value);
      };
      const handleValidity = (valid) => {
        console.log(valid);
      };
      return (
        <FormInput
          name="password"
          type="text"
          value={value}
          ariaLabel="unstyled-input"
          ariaRequired="true"
          onChange={handleChange}
          isValid={handleValidity}
          inputProps={{
            placeholder: 'enter your password',
          }}
          errorProps={{
            style: { fontSize: '10px', color: 'red', fontWeight: 'bold' },
          }}
          validation={{
            rule: {
              type: 'password',
              minLength: 8,
              uppercase: 1,
              numbers: 1,
              matchesOneOf: ['@', '_', '-', '.', '!'],
            },
            message:
              'your password need to be min 8 chars 1 Uppercase, 1 Number and one special character',
          }}
          errorPosition="bottom"
          prefix={{
            properties: {
              style: {
                border: '1px solid #d2d2d2',
                padding: '5px',
              },
            },
            content: 'Pre',
          }}
          suffix={{
            properties: {
              style: {
                border: '1px solid #d2d2d2',
                padding: '5px',
              },
            },
            content: 'Post',
          }}
        />
      );
    }}
    />
  </Story>
</Canvas>

### An example of 'un-styled-with-label' Input

<Canvas>
  <Story name="un-styled-with-label">
    {() => {
      const [value, setValue] = React.useState('');
      const handleChange = (event) => {
        setValue(event.currentTarget.value);
      };
      const handleValidity = (valid) => {
        console.log(valid);
      };
      return (
        <FormInput
          name="password"
          type="text"
          value={value}
          label="Password"
          ariaLabel="unstyled-input-with-label"
          ariaRequired="true"
          onChange={handleChange}
          isValid={handleValidity}
          inputProps={{
            id: 'password',
            placeholder: 'enter your password',
          }}
          labelProps={{
            htmlFor: 'password',
          }}
          errorProps={{
            style: { fontSize: '10px', color: 'red', fontWeight: 'bold' },
          }}
          validation={{
            rule: {
              type: 'password',
              minLength: 8,
              uppercase: 1,
              numbers: 1,
              matchesOneOf: ['@', '_', '-', '.', '!'],
            },
            message:
              'your password need to be min 8 chars 1 Uppercase, 1 Number and one special character',
          }}
          errorPosition="bottom"
          prefix={{
            properties: {
              style: {
                border: '1px solid #d2d2d2',
                padding: '5px',
              },
            },
            content: 'Pre',
          }}
          suffix={{
            properties: {
              style: {
                border: '1px solid #d2d2d2',
                padding: '5px',
              },
            },
            content: 'Post',
          }}
        />
      );
    }}
    />
  </Story>
</Canvas>

### An example of 'un-styled' Input with error triggered by a button

You can trigger the error message without interact with the input. In the following example the button will decide to display or not the error message

```js
const [displayError, setDisplayError] = React.useState(false);
const handleClick = () => {
    setDisplayError(true);
}
<FormInput
     ...
     displayError={displayError}
 />
 <button onClick={handleClick}>submit</button>
```

<Canvas>
  <Story name="un-styled-trigger-validity">
    {() => {
      const [value, setValue] = React.useState('');
      const [displayError, setDisplayError] = React.useState(false);
      const handleChange = (event) => {
        setValue(event.currentTarget.value);
      };
      const handleValidity = (valid) => {
        console.log(valid);
      };
      const handleClick = () => {
        setDisplayError(true);
      };
      return (
        <>
          <FormInput
            name="password"
            type="text"
            value={value}
            ariaLabel="unstyled-input-trigger-validity"
            ariaRequired="true"
            displayError={displayError}
            onChange={handleChange}
            isValid={handleValidity}
            inputProps={{
              placeholder: 'enter your password',
            }}
            errorProps={{
              style: { fontSize: '10px', color: 'red', fontWeight: 'bold' },
            }}
            validation={{
              rule: {
                type: 'password',
                minLength: 8,
                uppercase: 1,
                numbers: 1,
                matchesOneOf: ['@', '_', '-', '.', '!'],
              },
              message:
                'your password need to be min 8 chars 1 Uppercase, 1 Number and one special character',
            }}
            errorPosition="bottom"
            prefix={{
              properties: {
                style: {
                  border: '1px solid #d2d2d2',
                  padding: '5px',
                },
              },
              content: 'Pre',
            }}
            suffix={{
              properties: {
                style: {
                  border: '1px solid #d2d2d2',
                  padding: '5px',
                },
              },
              content: 'Post',
            }}
          />
          <button onClick={handleClick}>submit</button>
        </>
      );
    }}
    />
  </Story>
</Canvas>

# hint

<Canvas>
  <Story name="hint">
    {() => {
      const [value, setValue] = React.useState('');
      const handleChange = (event) => setValue(event.currentTarget.value);
      const handleValidity = (valid) => console.log(valid);
      return (
        <FormInput
          name="text3"
          type="text"
          value={value}
          ariaLabel="unstyled-input-with-hint"
          ariaRequired="true"
          onChange={handleChange}
          isValid={handleValidity}
          hint={{
            position: 'above',
            text: 'this is an example hint',
            className: 'govuk-hint',
          }}
          aria-label="standard-input-validation"
        />
      );
    }}
  </Story>
</Canvas>

# Static error

<Canvas>
  <Story name="static error">
    {() => {
      return (
        <FormInput
          label="this is a label"
          name="id"
          inputProps={{ id: 'id' }}
          type="text"
          value="value"
          ariaLabel="unstyled-input-with-static-error"
          ariaRequired="true"
          hint={{
            position: 'above',
            text: 'My hint',
            id: 'id_hint',
          }}
          staticErrorMessage="some error appened here"
          errorPosition="after-label"
        />
      );
    }}
  </Story>
</Canvas>

<Props of={FormInput} />
