import { Meta, Story, Canvas, Props } from '@storybook/addon-docs/blocks';
import { FormInput } from '../src/formInput/FormInput';
import "./style.css";

<Meta title="DCXLibrary/Form/Input" component={FormInput} />

### An example of 'un-styled' Input
<Canvas>
  <Story name="un-styled">
      {() => {
        const [value, setValue] = React.useState('')
        const handleChange = event => {
            setValue(event.currentTarget.value)
        }
        const handleValidity = valid => {
            console.log(valid)
        }
      return (
        <FormInput
            name="password"
            type="text"
            value={value}
            onChange={handleChange}
            isValid={handleValidity}
            inputProps={{
                placeholder: 'enter your password',
            }}
            errorProps={{
                style: {fontSize: '10px', color: 'red', fontWeight: 'bold'},
            }}
            validation={{
                rule: {
                type: 'password',
                minLength: 8,
                uppercase: 1,
                numbers: 1,
                matchesOneOf: ['@', '_', '-', '.', '!'],
                },
                message:
                'your password need to be min 8 chars 1 Uppercase, 1 Number and one special character',
            }}
            errorPosition="bottom"
            prefix={
                <div
                style={{
                    border: '1px solid #d2d2d2',
                    padding: '5px',
                }}
                >
                Pre
                </div>
            }
            suffix={
                <div
                style={{
                    border: '1px solid #d2d2d2',
                    padding: '5px',
                }}
                >
                Post
                </div>
            }
        />
      );
    }}
    />
  </Story>
</Canvas>

### An example of 'un-styled' Input with error triggered by a button
You can trigger the error message without interact with the input. In the following example the button will decide to display or not the error message
```js
const [displayError, setDisplayError] = React.useState(false);
const handleClick = () => {
    setDisplayError(true);
}
<FormInput
     ...
     displayError={displayError}
 /> 
 <button onClick={handleClick}>submit</button>   
```
<Canvas>
  <Story name="un-styled-trigger-validity">
       {() => {
        const [value, setValue] = React.useState('');
        const [displayError, setDisplayError] = React.useState(false);
        const handleChange = event => {
            setValue(event.currentTarget.value);
        }
        const handleValidity = valid => {
            console.log(valid);
        }
        const handleClick = () => {
            setDisplayError(true);
        }
      return (
          <>
        <FormInput
            name="password"
            type="text"
            value={value}
            displayError={displayError}
            onChange={handleChange}
            isValid={handleValidity}
            inputProps={{
                placeholder: 'enter your password',
            }}
            errorProps={{
                style: {fontSize: '10px', color: 'red', fontWeight: 'bold'},
            }}
            validation={{
                rule: {
                type: 'password',
                minLength: 8,
                uppercase: 1,
                numbers: 1,
                matchesOneOf: ['@', '_', '-', '.', '!'],
                },
                message:
                'your password need to be min 8 chars 1 Uppercase, 1 Number and one special character',
            }}
            errorPosition="bottom"
            prefix={
                <div
                style={{
                    border: '1px solid #d2d2d2',
                    padding: '5px',
                }}
                >
                Pre
                </div>
            }
            suffix={
                <div
                style={{
                    border: '1px solid #d2d2d2',
                    padding: '5px',
                }}
                >
                Post
                </div>
            }
        />
        <button onClick={handleClick}>submit</button>
        </>
      );
    }}
    />
  </Story>
</Canvas>

<Props of={FormInput} />